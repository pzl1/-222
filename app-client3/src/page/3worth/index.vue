<template>
  <div class="swiper">
    <van-nav-bar title="值得买">
      <template #right>
        <van-icon name="search" size="28" />
        <van-icon name="shopping-cart-o" size="28" />
      </template>
      <template #left>
        <van-icon name="home-o" size="28" />
      </template>
    </van-nav-bar>
    <div class="bg">
      <div class="title">
        <img
          src="http://m.you.163.com/topic/index/img/topic_logo.c2284970.png"
          alt=""
        />
        <span>严选好物 用心生活</span>
      </div>
    </div>
    <div class="floa">
      <div class="sw">
        <div class="swiper-container">
          <div class="swiper-wrapper">
            <div class="conten">
              <div class="swiper-slide">
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/c61f80c59ecd986c3a87599b8403a16f.gif?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/9d8114ce4ef435ceac5e82120efeec4c.png?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
              </div>
              <div class="swiper-slide">
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/c61f80c59ecd986c3a87599b8403a16f.gif?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/9d8114ce4ef435ceac5e82120efeec4c.png?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
              </div>
              <div class="swiper-slide">
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/c61f80c59ecd986c3a87599b8403a16f.gif?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/9d8114ce4ef435ceac5e82120efeec4c.png?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
              </div>
              <div class="swiper-slide">
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/c61f80c59ecd986c3a87599b8403a16f.gif?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/9d8114ce4ef435ceac5e82120efeec4c.png?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
              </div>
              <div class="swiper-slide">
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/c61f80c59ecd986c3a87599b8403a16f.gif?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/9d8114ce4ef435ceac5e82120efeec4c.png?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
              </div>
              <div class="swiper-slide">
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/c61f80c59ecd986c3a87599b8403a16f.gif?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/9d8114ce4ef435ceac5e82120efeec4c.png?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
              </div>
              <div class="swiper-slide">
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/c61f80c59ecd986c3a87599b8403a16f.gif?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/9d8114ce4ef435ceac5e82120efeec4c.png?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
              </div>
              <div class="swiper-slide">
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/c61f80c59ecd986c3a87599b8403a16f.gif?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/9d8114ce4ef435ceac5e82120efeec4c.png?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
              </div>
              <div class="swiper-slide">
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/c61f80c59ecd986c3a87599b8403a16f.gif?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/9d8114ce4ef435ceac5e82120efeec4c.png?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
              </div>
              <div class="swiper-slide">
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/c61f80c59ecd986c3a87599b8403a16f.gif?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
                <div>
                  <img
                    src="https://yanxuan.nosdn.127.net/9d8114ce4ef435ceac5e82120efeec4c.png?imageView&quality=65&thumbnail=120x120"
                    alt
                  />
                  <p class="p1">员工精选</p>
                  <p class="p2">每天1款内部价</p>
                </div>
              </div>
            </div>
          </div>
          <!-- 如果需要分页器 -->
          <div class="swiper-pagination"></div>

          <!-- 如果需要导航按钮 -->
          <!-- <div class="swiper-button-prev"></div>
          <div class="swiper-button-next"></div>-->

          <!-- 如果需要滚动条 -->
          <div class="swiper-scrollbar"></div>
        </div>
      </div>
    </div>
    <div class="splb van-clearfix aa">
      <van-list
        v-model="loading"
        :finished="finished"
        finished-text="没有更多了"
        @load="onLoad"
        offset="10"
      >
        <!-- <van-cell v-for="item in list" :key="item" :title="item" /> -->

        <div class="sp" v-for="(item, index) in list" :key="index">
          <img :src="item.picUrl" alt="" />
          <div>{{ item.title }}</div>
        </div>
      </van-list>
      <!-- <div class="sp" v-for="(item, index) in spsj" :key="index">
        <img :src="item.picUrl" alt="" />
        <div>{{ item.title }}</div>
      </div> -->
      <!-- <div class="sp">
        <img src="../../../3d38bcc8-31a7-457b-a197-06d70a01b6fd.png" alt="" />
        <div>两种意见 | 换上它，夏天跟草席竹席藤席说再见</div>
      </div>
      <div class="sp">
        <img src="../../../3d38bcc8-31a7-457b-a197-06d70a01b6fd.png" alt="" />
        <div>两种意见 | 换上它，夏天跟草席竹席藤席说再见</div>
      </div>
      <div class="sp">
        <img src="../../../3d38bcc8-31a7-457b-a197-06d70a01b6fd.png" alt="" />
        <div>两种意见 | 换上它，夏天跟草席竹席藤席说再见</div>
      </div>
      <div class="sp">
        <img src="../../../3d38bcc8-31a7-457b-a197-06d70a01b6fd.png" alt="" />
        <div>两种意见 | 换上它，夏天跟草席竹席藤席说再见</div>
      </div>
      <div class="sp">
        <img src="../../../3d38bcc8-31a7-457b-a197-06d70a01b6fd.png" alt="" />
        <div>两种意见 | 换上它，夏天跟草席竹席藤席说再见</div>
      </div> -->
    </div>
  </div>
</template>

<script>
import Swiper from "swiper";
// import { Swiper, SwiperSlide, directive } from "vue-awesome-swiper";
// import "swiper/css/swiper.css";

export default {
  name: "carrousel",

  data() {
    return {
      list: [],
      loading: false,
      finished: false,
      i: 0,
    };
  },

  methods: {
    async getspsj(i = 1) {
      const result = await this.$api.zdm.product(i);
      console.log(result.data.data.result[0]);
      this.list.push(...result.data.data.result[0].topics);
    },

    onLoad() {
      // 异步更新数据
      // setTimeout 仅做示例，真实场景中一般为 ajax 请求
      setTimeout(() => {
        this.i++;
        // this.list.push(this.list.length + 1);
        console.log(this.i);
        this.getspsj(this.i);
        console.log(this.list);
        // 加载状态结束
        this.loading = false;
        // 数据全部加载完成
        // if (this.list.length >= 16) {
        //   this.finished = true;
        //   // this.loading = false;
        // }
      }, 1000);
    },
  },
  //生命周期 - 创建完成（访问当前this实例）
  created() {},
  //生命周期 - 挂载完成（访问DOM元素）

  mounted() {
    this.getspsj();

    new Swiper(".swiper-container", {
      // direction: 'vertical', // 垂直切换选项
      // loop: true, // 循环模式选项
      slidesPerView: 4,
      // 如果需要分页器
      // pagination: {
      //   el: '.swiper-pagination',
      //   type: 'progressbar'
      // },

      // 如果需要前进后退按钮

      // 如果需要滚动条
      scrollbar: {
        el: ".swiper-scrollbar",
      },
    });
  },
};
</script>
<style lang="less" scoped>
* {
  padding: 0;
  margin: 0;
}
.swiper {
  width: 100%;
  height: 100%;
  background-color: rgb(238, 238, 238);
  // overflow: hidden;
}
.bg {
  width: 100%;
  height: 200px;
  background: url("http://m.you.163.com/topic/index/img/topic_title_bg.2373a140.png");
  background-size: 100% 200px;
  overflow: hidden;
  position: relative;
  .title {
    margin: 25px 0 0 10px;
    img {
      width: 65px;
      height: 34px;
      vertical-align: middle;
    }
    span {
      color: white;
      vertical-align: middle;
      font-size: 15px;
    }
  }
}

.sw {
  width: 95%;
  height: 270px;
  background-color: white;
  border-radius: 2%;
  // margin: auto;
  // float: left;
  position: absolute;
  left: 2.5%;
  top: 115px;
  // overflow-x: auto;
  overflow: auto;
  .swiper-wrapper {
    .conten {
      width: 1000px;

      .swiper-slide {
        float: left;
        div {
          margin: 20px 0;
          width: 90px;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;

          .p1 {
            font-size: 14px;
            font-weight: 700;
          }
          .p2 {
            font-size: 12px;
            color: rgb(141, 140, 140);
          }
        }
        img {
          width: 60px;
          height: 60px;
          border-radius: 50%;
          // margin: 10px;
        }
      }
    }
  }
}
.aa {
  display: none;
}
.splb {
  width: 100%;
  margin: auto;
  // height: 200px;
  // float: left;
  border: 1px solid #ccc;
  margin-top: 150px;
  display: flex;
  justify-content: center;
  // align-items: center;
  flex-wrap: wrap;

  // height: 100%;
  .sp {
    width: 45%;
    height: 300px;
    border: 1px solid #ccc;
    background-color: white;
    margin: 5px;
    flex-grow: 0;
    float: left;

    img {
      width: 100%;
      height: 170px;
    }
    div {
      // height: 60px;
      font-size: 14px;
      padding: 5px;
    }
  }
}
</style>
